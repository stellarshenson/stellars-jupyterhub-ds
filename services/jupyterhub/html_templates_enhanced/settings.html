{% extends "page.html" %}

{% block main %}
<div class="container">
  <h1>Platform Settings</h1>
  <p class="text-muted">Read-only view of current environment variables and configuration</p>

  <hr>

  <div class="row">
    <div class="col-12">
      <table class="table table-striped table-sm settings-table">
        <thead class="table-dark">
          <tr>
            <th class="col-category">Category</th>
            <th class="col-setting">Setting</th>
            <th class="col-value">Value</th>
            <th class="col-description">Description</th>
          </tr>
        </thead>
        <tbody>
          {% set current_category = namespace(value='') %}
          {% for setting in settings %}
            <tr>
              <td>
                {% if setting.category != current_category.value %}
                  <strong>{{ setting.category }}</strong>
                  {% set current_category.value = setting.category %}
                {% endif %}
              </td>
              <td><code>{{ setting.name }}</code></td>
              <td>
                {% if setting.value|length > 50 %}
                  <span title="{{ setting.value }}">{{ setting.value[:47] }}...</span>
                {% else %}
                  {{ setting.value }}
                {% endif %}
              </td>
              <td class="text-muted">{{ setting.description }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <p class="text-muted small">
    These settings are configured via environment variables. Changes require container restart to take effect.
  </p>
</div>
{% endblock %}
